/*!
  jQuery inlineOptions Plugin
  Version: 0.1.0
  URL: http://github.com/bpartridg83/inlineOptions-jQuery-plugin
  Copyright: Copyright 2011 Brian Partridge
  License: GPL
 */(function(a){a.fn.inlineOptions=function(b){return this.each(function(){b||(b=a(this).data("iop"));a.fn.inlineOptions.create(a(this),b)})};a.fn.inlineOptions.set=function(b){return a.extend({},a.fn.inlineOptions.defaults,b)};a.fn.inlineOptions.create=function(b,f){var g,c=a.fn.inlineOptions.set(f);try{g=a.type(b)==="object"?b:a(b)}catch(h){g=a("select")}if(!g.parent().hasClass(c.className)){var d=a("<ul />",{"class":c.className});g.wrap(d)}var d=g.parent(),e=g.find("option");d.attr("data-iop",true).data("iop-options", c);if(!d.find("small").length){d.append('<span class="window"><span class="wrapper"></span></span>');for(var c=0,i=e.length;c<i;c+=1)a("<a />",{text:e.eq(c).text(),href:"#"+e.eq(c).val()}).data("value",e.eq(c).val()).wrap("<li />").parent().appendTo(d),a("<small />",{text:e.eq(c).text()}).appendTo(d.find(".wrapper"));d.find(".window").css({height:d.height()+"px"});d.find("select").bind("change",function(){a.fn.inlineOptions.update(a(this).parent())});d.find("a").bind("click",function(){a(this).closest("ul").find("select").val(a(this).data("value")).trigger("change"); return false})}a.fn.inlineOptions.update(d,false);return g};a.fn.inlineOptions.destroy=function(b){try{var f=a.type(b)==="object"?b:a(b)}catch(g){f=a("select")}var b=f.parent(),c=b.data("iop-options");return b.hasClass(c.className)?(b.find("li, span").remove(),f.unwrap().unbind("change"),f):false};a.fn.inlineOptions.update=function(b){var f=arguments;(arguments.length?a.type(b)==="object"?b:a(b):a("[data-iop]")).each(function(){var b=a(this).data("iop-options"),c=(f.length>1?f[1]:b.animate)?b.speed: 0,h=a(this).find("select option:selected"),d=h.index(),h=h.closest("ul"),e=h.find("a").eq(d),d=e.outerWidth(),e=e.position().left;h.find(".window").stop().animate({width:d+1,left:e},c,b.easing).fadeIn(c).find(".wrapper").stop().animate({left:-e+2},c,b.easing)})};a.fn.inlineOptions.defaults={animate:true,speed:250,className:"iop",easing:"swing"}})(jQuery);